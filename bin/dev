#!/usr/bin/env bash

# default values
PORT="5678"

POSITIONAL_ARGS=()
while [[ $# -gt 0 ]]; do
    case $1 in
        -P|--port)
            shift;
            PORT="$1";
            shift;
            number_regex='^[0-9]+$'
            if ! [[ $PORT =~ $number_regex ]] || [ $PORT -gt 65536 ]; then
                echo "Error: Port must be a number from 0 to 65536, got \"$PORT\"" >&2
                exit 1
            fi
        ;;
        *)
            POSITIONAL_ARGS+=("$1");
            shift;
        ;;
    esac
done

php -S localhost:$PORT -t public;
